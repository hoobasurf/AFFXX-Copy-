<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Connexion Authentique S√©rieuse</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap" rel="stylesheet">

  <style>
  /* ... Ton CSS complet ... (je garde celui que tu as donn√©, corrig√©) */

  * { box-sizing: border-box; margin:0; padding:0; }
  html, body {
    height:100%; width:100%;
    font-family: 'Orbitron', sans-serif;
    background: url('planete-magique.jpg') no-repeat center center/cover;
    overflow: hidden; color: white;
  }
  body::before {
    content:""; position:fixed; top:0; left:0;
    width:100%; height:100%;
    background: radial-gradient(circle at center, rgba(255,0,255,0.05), transparent 70%);
    z-index:1; pointer-events:none;
    animation: floatStars 60s linear infinite;
  }
  @keyframes floatStars { 0% {transform: translateY(0);} 100% {transform: translateY(-10px);} }
  .header {
    position: relative; z-index:2;
    padding: 20px;
  }
  .btn-back {
    position: absolute; top:20px; left:20px;
    color: #ff66cc; font-size:1.5em;
    cursor:pointer; text-decoration:none;
    transition: transform .2s;
  }
  .btn-back:hover { transform: scale(1.2); }
  .carousel-container {
    z-index:2;
    position: relative;
    width:100%; height:calc(100% - 60px);
    overflow: hidden;
    display: flex;
    align-items:center;
  }
  .carousel {
    display:flex;
    overflow-x: auto;
    scroll-snap-type: x mandatory;
    -webkit-overflow-scrolling: touch;
    gap:40px;
    padding:40px;
  }
  .carousel::-webkit-scrollbar { display:none; }
  .card {
    scroll-snap-align: center;
    flex: 0 0 150px;
    background: rgba(0,0,0,0.5);
    border-radius: 16px;
    padding: 15px;
    text-align: center;
    transition: transform .3s, box-shadow .3s;
    cursor: pointer;
    position: relative;
  }
  .card img {
    width: 90px;
    height: 90px;
    border-radius: 50%;
    object-fit: cover;
    margin-bottom: 10px;
    border: 3px solid;
  }
  .girl img { border-color:#ff66cc; box-shadow:0 0 12px #ff66cc; }
  .boy img { border-color:#9933ff; box-shadow:0 0 12px #9933ff; }
  .name { font-size:1.1em; margin-bottom:5px;}
  .btns {
    display:flex;
    justify-content: center;
    gap: 8px;
    margin-top: 6px;
  }
  .btn-like, .btn-chat, .btn-fav {
    width:30px; height:30px;
    border-radius:50%;
    background-color:rgba(255,255,255,0.1);
    border:1px solid #ff66cc;
    color:#ff66cc;
    display:flex; align-items:center; justify-content:center;
    font-size:1em;
    cursor:pointer;
    transition: transform .2s, background-color .3s, color .3s;
    user-select:none;
  }
  .btn-like:hover, .btn-chat:hover, .btn-fav:hover { transform: scale(1.2); }
  /* Bouton favoris en jaune quand actif */
  .btn-fav.active {
    background-color: #ffea00;
    border-color: #ffea00;
    color: #333;
    transform: scale(1.3);
  }
  .card.center {
    transform: scale(1.1);
    box-shadow: 0 0 20px #ff00ff;
  }
  /* Mini‚Äëprofil gauche apr√®s message */
  .left-mini-profiles {
    position: fixed;
    top: 50%;
    left: 10px;
    transform: translateY(-50%);
    display: flex;
    flex-direction: column;
    gap: 12px;
    z-index: 5;
  }
  .left-mini-profiles img {
    width:50px; height:50px;
    border-radius:50%;
    border:2px solid #ff66cc;
    object-fit:cover;
    cursor:pointer;
    box-shadow:0 0 8px #ff66cc;
    transition:transform .2s;
  }
  .left-mini-profiles img:hover { transform: scale(1.2); }
  .modal {
    display:none; position:fixed;
    top:0; left:0; width:100%; height:100%;
    background: rgba(0,0,0,0.8);
    align-items:center; justify-content:center;
    z-index:10;
  }
  .modal.active { display:flex; }
  .modal-content {
    background: rgba(0,0,0,0.7);
    padding:20px; border-radius:12px;
    width:90%; max-width:400px;
    text-align:center; position:relative;
    max-height:90vh; overflow-y:auto;
  }
  .modal-content h2 { margin-bottom:10px; color:#ff66cc;}
  .modal-content p { margin-bottom:8px; color:#ddd; font-size:0.95em;}
  .modal-close {
    position:absolute; top:10px; right:10px;
    font-size:1.3em; color:#ff66cc;
    cursor:pointer;
  }
  .photo-gallery {
    display:flex; justify-content:center; flex-wrap: wrap; gap: 8px; margin-top: 10px;
  }
  .photo-gallery img {
    width: 80px; height: 80px;
    border-radius: 12px;
    object-fit: cover;
    cursor: pointer;
    border: 2px solid transparent;
    transition: border-color 0.3s;
  }
  .photo-gallery img:hover {
    border-color: #ff66cc;
  }
  </style>
</head>
<body>

  <div class="header">
    <a href="page2.html" class="btn-back">&larr; Retour</a>
  </div>

  <div class="left-mini-profiles" id="leftMiniProfiles">
    <!-- Mini-profil s‚Äôaffiche ici apr√®s message -->
  </div>

  <div class="carousel-container fade-in">
    <div class="carousel" id="carousel">
      <div class="card girl" data-name="Sophie" data-age="28" data-lieu="Paris" data-desc="Passionn√©e par l‚Äôastronomie et les romans SF." data-gallery="47,49,51" data-msg="false">
        <img src="https://i.pravatar.cc/150?img=47" alt="Sophie">
        <div class="name">Sophie</div>
        <div class="btns">
          <div class="btn-chat" title="Chat">üí¨</div>
          <div class="btn-like" title="Like">üíñ</div>
          <div class="btn-fav" title="Favoris">‚≠êÔ∏è</div>
        </div>
      </div>
      <div class="card boy" data-name="Lucas" data-age="31" data-lieu="Lyon" data-desc="Fan de jeux coop√©ratifs et nature." data-gallery="12,14,16" data-msg="false">
        <img src="https://i.pravatar.cc/150?img=12" alt="Lucas">
        <div class="name">Lucas</div>
        <div class="btns">
          <div class="btn-chat" title="Chat">üí¨</div>
          <div class="btn-like" title="Like">üíñ</div>
          <div class="btn-fav" title="Favoris">‚≠êÔ∏è</div>
        </div>
      </div>
      <div class="card girl" data-name="Emma" data-age="24" data-lieu="Marseille" data-desc="Danseuse et amoureuse des chats." data-gallery="55,56,58" data-msg="false">
        <img src="https://i.pravatar.cc/150?img=55" alt="Emma">
        <div class="name">Emma</div>
        <div class="btns">
          <div class="btn-chat" title="Chat">üí¨</div>
          <div class="btn-like" title="Like">üíñ</div>
          <div class="btn-fav" title="Favoris">‚≠êÔ∏è</div>
        </div>
      </div>
      <!-- Ajoute plus de profils ici -->
    </div>
  </div>

  <!-- Modal Profil -->
  <div class="modal" id="profileModal">
    <div class="modal-content">
      <span class="modal-close" id="modalClose">&times;</span>
      <h2 id="modalName"></h2>
      <p id="modalAgeLieu"></p>
      <p id="modalDesc"></p>
      <div class="photo-gallery" id="modalGallery"></div>
    </div>
  </div>

<script>
  const cards = document.querySelectorAll('.card');
  const leftMiniProfiles = document.getElementById('leftMiniProfiles');

  cards.forEach(card => {
    const btnMsg = card.querySelector('.btn-msg');
    const btnFav = card.querySelector('.btn-fav');

    // ‚úÖ Bouton MESSAGE ‚Üí ajoute miniature √† gauche
    btnMsg.addEventListener('click', (e) => {
      e.stopPropagation();
      const name = card.dataset.name;
      const imgSrc = card.querySelector('img').src;

      if (![...leftMiniProfiles.children].some(img => img.alt === name)) {
        const img = document.createElement('img');
        img.src = imgSrc;
        img.alt = name;
        img.title = name;
        img.className = 'mini-profile';
        img.draggable = true;
        leftMiniProfiles.appendChild(img);

        // Clic ‚Üí ouvrir chat
        img.addEventListener('click', () => openChat(name));

        // Maintien 3s ‚Üí suppression
        let pressTimer;
        img.addEventListener('mousedown', () => {
          pressTimer = setTimeout(() => {
            img.remove();
          }, 3000);
        });
        img.addEventListener('mouseup', () => clearTimeout(pressTimer));

        // Drag & drop
        img.addEventListener('dragstart', (e) => {
          e.dataTransfer.setData('text/plain', name);
          img.classList.add('dragging');
        });
        img.addEventListener('dragend', () => {
          img.classList.remove('dragging');
        });
      }
    });

    // ‚úÖ Bouton LIKE ‚Üí toggle √©toile
    btnFav.addEventListener('click', (e) => {
      e.stopPropagation();
      btnFav.classList.toggle('active');
    });
  });

  // ‚úÖ Fonction d'ouverture du chat
  function openChat(name) {
    let chatBox = document.getElementById('chatBox');
    if (!chatBox) {
      chatBox = document.createElement('div');
      chatBox.id = 'chatBox';
      chatBox.style.position = 'fixed';
      chatBox.style.bottom = '10px';
      chatBox.style.left = '220px';
      chatBox.style.background = '#fff';
      chatBox.style.border = '1px solid #ccc';
      chatBox.style.borderRadius = '8px';
      chatBox.style.padding = '10px';
      chatBox.style.width = '250px';
      chatBox.innerHTML = `
        <div style="font-weight: bold;">Chat avec ${name}</div>
        <div id="chatMessages" style="height: 100px; overflow-y: auto; margin: 8px 0;"></div>
        <input id="chatInput" type="text" placeholder="Message..." style="width: 70%;">
        <button id="sendBtn">Envoyer</button>
      `;
      document.body.appendChild(chatBox);

      const sendBtn = chatBox.querySelector('#sendBtn');
      const input = chatBox.querySelector('#chatInput');
      const chatMessages = chatBox.querySelector('#chatMessages');

      sendBtn.onclick = () => {
        if (input.value.trim()) {
          const p = document.createElement('p');
          p.textContent = input.value.trim();
          chatMessages.appendChild(p);
          input.value = '';
        }
      };
    }
  }

  // ‚úÖ Activer le drop sur la barre gauche
  leftMiniProfiles.addEventListener('dragover', e => e.preventDefault());
  leftMiniProfiles.addEventListener('drop', (e) => {
    e.preventDefault();
    const draggedName = e.dataTransfer.getData('text/plain');
    const draggedImg = [...leftMiniProfiles.children].find(img => img.alt === draggedName);
    if (draggedImg) {
      leftMiniProfiles.appendChild(draggedImg);
    }
  });
</script>
</body>
</html>
