<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" />
<title>Page 2</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap" rel="stylesheet"/>
<style>
  *{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%;width:100%;font-family:'Orbitron',sans-serif;background:#000;color:#fff}
  /* Ton CSS visuel complet doit rester tel quel ici */
</style>
</head>
<body>
  <!--
    =======
    CONTENU VISUEL EXISTANT DE PAGE2.HTML
    =======
    Garder intégralement la structure et le style déjà présents.
    Ci-dessous, un placeholder si nécessaire — remplace par ton HTML existant.
  -->
  <main id="page2-content" style="padding:20px;">
    <!-- Ton contenu de page2 (profil, dashboard...) doit rester ici -->
    <h1 style="font-size:20px;margin-bottom:12px;">Page 2 - contenu</h1>
  </main>

  <!-- --- SCRIPT: bloquer l'accès si non connecté et éviter les boucles --- -->
  <script type="module">
    import { auth } from "./firebase.js";
    import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-auth.js";

    // Si pas d'utilisateur, on renvoie vers inscription.html
    // On utilise onAuthStateChanged afin d'attendre l'initialisation de Firebase et éviter les boucles
    onAuthStateChanged(auth, (user) => {
      if (!user) {
        // déconnexion/incohérence détectée : rediriger proprement vers inscription
        window.location.href = "inscription.html";
      } else {
        // connecté : ok, rester sur page2
        console.log("page2.html : utilisateur connecté :", user.email ?? user.uid);
      }
    });
  </script>
</body>
</html>
